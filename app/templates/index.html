{% extends 'base.html' %}
{% load humanize %}
{% block content %}
    <div class="mx-10 mt-8 font-bold">Add Expense âž•</div>
    <form method="post">
        {% csrf_token %}
        <div class="form-container px-10 py-10">
            <div class="mx-10">
                <div class="mb-5">
                    <label for="name">Expense Name</label>
                </div>
                <div class="border"> {{ expense_form.name }} </div>
            </div>
            <div class="mx-10"> 
                <div class="mb-5">
                    <label for="amount">Amount</label>
                </div>
                <div class="border"> {{ expense_form.amount }} </div>
            </div>
            <div class="mx-10">
                <div class="mb-5">
                    <label for="category">Category</label>
                </div>
                <div class="border"> {{ expense_form.category }} </div>
            </div>
            <div class="mx-10 mt-8">
                <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded-md">Add Expense</button>
            </div>
        </div>
    </form>
    <div class="mx-10 mt-8 font-bold">Expenses ðŸ’¸</div>
    <div class="shadow-lg m-10 rounded-lg">
        <div class="expense-header flex flex-wrap space-x-10">
            <span>Name</span>
            <span>Amount</span>
            <span>Category</span>
            <span>Date</span>
            <span>Actions</span>
        </div>
        <hr class="m-10">
        {% for expense in expenses %}
            <div class="expense-row flex flex-wrap px-20 py-5">
                <span class="font-bold">{{ expense.name }}</span>
                <span class="font-bold">${{ expense.amount|intcomma }}</span>
                <span class="font-bold">{{ expense.category }}</span>
                <span class="font-bold">{{ expense.date }}</span>
                <span class="font-bold flex items-center space-x-2">
                    <a href="{% url 'edit' expense.id %}" class="bg-blue-500 text-white px-4 py-2 rounded-md inline-flex items-center">
                        <i class="fa-solid fa-pen-to-square"></i>
                    </a>
                    <form method="post" action="{% url 'delete' expense.id %}" class="inline-block">
                        {% csrf_token %}
                        <button type="submit" class="bg-red-500 text-white px-4 py-2 rounded-md inline-flex items-center">
                            <i class="fa-solid fa-trash"></i>
                        </button>
                    </form>
                </span>
            </div>
        {% endfor %}
        <div class="expense-row flex flex-wrap px-20 py-5">
            <span></span>
            <span class="font-bold text-green-500">${{ total_expenses|intcomma }}</span>
            <span></span>
            <span></span>
            <span></span>
        </div>
    </div>
    <div class="flex">
        <div class="w-1/3 shadow-lg ml-10 rounded-lg">
            <h1 class="ml-10 font-bold text-gray-500">LAST 365 DAYS</h1>
            <h1 class="ml-10 my-5 text-2xl text-green-500 font-bold">TOTAL: ${{ yearly_sum|intcomma }}</h1>
        </div>
        <div class="w-1/3 shadow-lg ml-10 rounded-lg">
            <h1 class="ml-10 font-bold text-gray-500">LAST 30 DAYS</h1>
            <h1 class="ml-10 my-5 text-2xl text-green-500 font-bold">TOTAL: ${{ monthly_sum|intcomma }}</h1>
        </div>
        <div class="w-1/3 shadow-lg ml-10 rounded-lg">
            <h1 class="ml-10 font-bold text-gray-500">LAST 7 DAYS</h1>
            <h1 class="ml-10 my-5 text-2xl text-green-500 font-bold">TOTAL: ${{ weekly_sum|intcomma }}</h1>
        </div>
    </div>
    <div class="flex">
        <div class="w-1/2 shadow lg-m-10">
            <div class="flex flex-wrap space-x-40 font-bold px-20 py-5">
                <span>Past 30 days sup expenses</span>
            </div>
            <hr>
            <div class="30-day-table">
                {% for daily_sum in daily_sums %}
                    <div class="flex flex-wrap px-20 py-5">
                        <span>{{ daily_sum.date|date:"M d, Y" }}</span>
                        <span>${{ daily_sum.total_amount|intcomma }}</span>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>

{% endblock %}